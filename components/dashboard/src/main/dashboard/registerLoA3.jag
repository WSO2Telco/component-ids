<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mobile Connect</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">

  <link rel="apple-touch-icon" href="apple-touch-icon.png">

  <!-- styles -->
  
  <script src="/portal/gadgets/user_profile/js/jquery.min.js" type="text/javascript"></script>
  <script src="/portal/gadgets/user_profile/js/main.js" type="text/javascript"></script>
  <script src="/portal/gadgets/user_profile/js/modal.js" type="text/javascript"></script>
  <script src="/dashboard/js/landing.js" type="text/javascript"></script>
  
  <link rel="stylesheet" href="mcresources/css/style.css">
  
  <!-- load main script early asyncronously -->
  <script type="text/javascript" src="/dashboard/mcresources/js/main.js" ></script>

  <noscript>
    <!-- Fallback synchronous download, halt page rendering if load is slow  -->
    <link href="//fonts.googleapis.com/css?family=Roboto:400,300,700,400italic,300italic,700italic" rel="stylesheet" type="text/css">
  </noscript>
  <!-- loads fonts asyncronously preventing font loading from block page render -->
  <script>
    // Config for loading the web fonts
    var WebFontConfig = {
      google: {
        families: ['Roboto:400,300,700,400italic,300italic,700italic']
      },
      active: function() {
        // Set a cookie that the font has been downloaded and should be cached
        var d = new Date();
        d.setTime(d.getTime() + (7 * 86400000)); // plus 7 Days
        document.cookie = "cachedroboto=true; expires=" + d.toGMTString() + "; path=/";
      }
    };
    </script>
    <script src="mcresources/js/vendor/webfontloader.js"></script>
    <!-- Adds IE root class without breaking doctype -->
  <!--[if IE]>
        <script>document.documentElement.className = document.documentElement.className + " ie";</script>
        <![endif]-->
        <script type="text/javascript" src="mcresources/js/vendor/modernizr.js"></script>





        <%
        var log = new Log();
        var msisdn = request.getParameter("msisdn")!= null ?  request.getParameter("msisdn") : "";

        log.info( "msisdn :"+msisdn );
        var token = request.getParameter("token")!= null ?  request.getParameter("token") : "";
        
        log.info( "tokenid :"+token );
        var acr = request.getParameter("acr")!= null ?  request.getParameter("acr") : "";
        log.info( "acr :"+acr );
        var operator = request.getParameter("operator")!= null ?  request.getParameter("operator") : "";
        log.info( "operator :"+operator );
        

        if(operator != ""){
          %>
          <link href="css/branding/<%=operator%>-style.css" rel="stylesheet">
          <%}%>
        </head>


        <body>

          <body class="theme--light">
            <div class="site__root">
              <header class="site-header">
                <div class="site-header__inner site__wrap">
                  <h1 class="visuallyhidden">Mobile&nbsp;Connect</h1>
                  <a href="/"><img src="mcresources/img/svg/mobile-connect.svg" alt="Mobile Connect&nbsp;Logo" width="150" class="site-header__logo"></a>
                  <% if(operator != ""){ 
      var imgPath = "img/branding/" + operator + "_logo.svg";
    %>
      <p class="site-header__powered-by">powered&nbsp;by      
      </p>
      <a >
      <img class="brandLogo" src='<%= imgPath %>' alt='<%= operator %>' >
      </a>
    <% } %>
        <!-- <form action="/lang" class="site-header__lang-menu field--select field--select-plain" novalidate>
          <label for="field-select-lang" class="visuallyhidden">Language:</label>
          <select id="field-select-lang" name="lang" class="field__select-native js-transparent">
            <option value="en" selected>English&nbsp;(UK)</option>
            <option value="de">Deutsche</option>
            <option value="th">ภาษาไทย</option>
          </select>
          <input type="hidden" name="return-url" value="/registration/security-questions">
          <input type="submit" value="Go" class="btn btn--natural btn--light js-visuallyhidden">
        </form> -->
      </div>
    </header>

    <main class="site__main site__wrap section">
      <header class="page__header">
        <h1 class="page__heading">Now, let’s make your account&nbsp;secure</h1>
        <p>Create a PIN for secure log-in and two questions we can ask you in case you ever forget your&nbsp;PIN.</p>
      </header>

      <form class="form-horizontal" id="selfReg" name="selfReg">

        <input type="hidden" name="regExp_PRIMARY" value="^[\S]{5,30}$">

        <div class="control-group">
          <div class="controls" style="display:none;" type="hidden">
            <select name="domain">

              <option value="PRIMARY">PRIMARY</option>

            </select>
          </div>
        </div>

        <input type="hidden" value="" id="user_name" name="userName">
        <input type="hidden" value="" id="password" name="pwd">
        <input type="hidden" value="" id="retype_pwd" name="retypePwd">
        <input type="hidden"  value='<%=operator%>' name="operator" id="operator"/>
        <input type="hidden"  value='<%=token%>' name="token" id="token"/>
        <input type="hidden"  value='<%=acr%>' name="acr" id="acr"/>
        <input type="hidden" value="" name="http://wso2.org/claims/challengeQuestion1">
        <input type="hidden" value="" name="http://wso2.org/claims/challengeQuestion2">

        <input type="hidden" value="<%=msisdn%>" id="Mobile" name="http://wso2.org/claims/mobile">



        <li class="field--select field--select-block">
          <label for="field-account-security-question-1">Choose a security&nbsp;question</label>
          <select name="challengeQuestion1" id="q1" class="field__select-native" required data-parsley-error-message="Please choose a security&nbsp;question.">
            <option disabled selected>Choose a&nbsp;question</option>
              <!-- <option value="q1">What is your Mother's family&nbsp;name?</option>
              <option value="q2">What is the name of your&nbsp;pet?</option>
              <option value="q3">What was the name of your first&nbsp;school?</option>
              <option value="q4">What was the name of your favourite&nbsp;teacher?</option>
              <option value="q5">What is the name of your favourite sports&nbsp;team?</option>
              <option value="q6">What was the name of the first film you&nbsp;saw?</option> -->
              <option name="q" value="City where you were born ?">City where you were born ?</option>
              
              <option name="q" value="Favorite vacation location ?">Favorite vacation location ?</option>
              
              <option name="q" value="Father's middle name ?">Father's middle name ?</option>
              
              <option name="q" value="Favorite food ?">Favorite food ?</option>
            </select>
          </li>
          <li>
            <label for="field-account-security-answer-1">Type the answer to your question&nbsp;here</label>
            <input type="text" name="challengeAns1" +="" json.fieldvalues.return[i].fieldname="" ""="" id="field-account-security-answer-1" placeholder="Answer your&nbsp;question" required data-parsley-error-message="Please answer your security&nbsp;question.">
          </li>
          <li class="field--select field--select-block">
            <label for="field-account-security-question-2">Choose a second&nbsp;question</label>
            <select id="q2" name="challengeQuestion2" class="field__select-native" required data-parsley-notequalto="#field-account-security-question-1" data-parsley-required-message="Please choose a security&nbsp;question." data-parsley-notequalto-message="Please choose a different security&nbsp;question.">
              <option disabled selected>Choose a&nbsp;question</option>
              <option name="q" value="Favorite sport ?">Favorite sport ?</option>
              
              <option name="q" value="Name of the hospital where you were born ?">Name of the hospital where you were born ?</option>
              
              <option name="q" value="Name of your first pet ?">Name of your first pet ?</option>
              
              <option name="q" value="Model of your first car ?">Model of your first car ?</option>
            </select>
          </li>
          <li>
            <label for="field-account-security-answer-2">Type the answer to your second question&nbsp;here</label>
            <input type="text" name="challengeAns2" +="" json.fieldvalues.return[i].fieldname="" ""="" id="field-account-security-answer-2" placeholder="Answer your&nbsp;question" required data-parsley-error-message="Please answer your security&nbsp;question.">
          </li>







          <ul class="form-fields">
            <li class="size--medium" id="terms" >
              <p align="center">By setting up an account, you are agreeing to the <a href="https://identity.demo.wso2telco.com/dashboard/termsConditions.html" target="_blank">Terms and Conditions</a></p>
              <p align="center">The <a href="/no-page" target="_blank">Mobile Connect Privacy Promise</a> means that your mobile number won’t be shared and no personal information will be disclosed without your consent. See our full <a href="/no-page" target="_blank">privacy policy&nbsp;here</a>.</p>
            </li>

            <li>
              <div class="grid">
                <div class="grid__item one-half">
                  <a onclick="cancelProcessToLogin()" class="btn btn--outline btn--full btn--large" data-dismiss="modal">
                    No&nbsp;thanks
                  </a>
                </div>
                <div class="grid__item one-half">
                  <button type="button" id="validate-btn" name="action" onclick="validate()" value="yes" class="btn btn--full btn--fill btn--large btn--color">
                    Yes
                  </button>
                </div>
              </div>
            </li>
          </ul>




        </form>




        <!-- Modal -->

      </main>
    </div>

    <div id="message" hidden></div>
    <script src="/portal/gadgets/user_profile/js/modal.js" type="text/javascript"></script>


    <div id="gadgetBody" hidden></div>
    <div id="message" hidden></div>


  </body>

  </html>
